{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://alt.science/schemas/atdata-ndarray-bytes/1.1.0",
  "title": "ATDataNDArrayBytes",
  "description": "Standard definition for numpy NDArray types in JSON Schema, compatible with atdata WebDataset serialization. This version adds optional dtype, shape, and dimension name annotations to the base NDArray byte format.",
  "version": "1.1.0",
  "$defs": {
    "ndarray": {
      "type": "object",
      "description": "Numpy array with optional type and shape annotations. The `data` field contains the serialized array bytes, while optional fields provide metadata for validation and code generation without needing to deserialize the array.",
      "required": ["data"],
      "properties": {
        "data": {
          "type": "string",
          "format": "byte",
          "description": "Numpy array serialized using numpy `.npy` format via `np.save` (includes dtype and shape in binary header). When represented in JSON, this is a base64-encoded string. In msgpack, this is raw bytes.",
          "contentEncoding": "base64",
          "contentMediaType": "application/octet-stream"
        },
        "dtype": {
          "type": "string",
          "description": "Numpy dtype string describing the array's data type (e.g., \"float32\", \"int64\", \"complex128\")."
        },
        "shape": {
          "type": "array",
          "description": "Expected array shape. Each element is an integer dimension size, or null for variable/batch dimensions.",
          "items": {
            "type": ["integer", "null"]
          }
        },
        "dimensionNames": {
          "type": "array",
          "description": "Human-readable names for each dimension (e.g., [\"batch\", \"height\", \"width\", \"channels\"]).",
          "items": {
            "type": "string"
          }
        }
      }
    }
  }
}
